<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sports Personality Classifier</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="wrapper">

    <!-- NOTE -->
    <div class="card note">
        <h3>âš  Important Note</h3>
        <p>This model can classify images of <b>only these 5 sports personalities</b>:</p>
        <ul>
            <li>Virat Kohli</li>
            <li>Lionel Messi</li>
            <li>Roger Federer</li>
            <li>Serena Williams</li>
            <li>Maria Sharapova</li>
        </ul>
        <p class="small">To upload another image, please refresh the page.</p>
    </div>

    <!-- UPLOAD -->
    <div class="card upload">
        <h3>Upload Image</h3>

        <form id="form">
            <input type="file" id="image" accept="image/*" required>
            <button type="submit">Predict</button>
        </form>

        <img id="preview" class="hidden">
    </div>

    <!-- RESULT -->
    <div class="card result">
        <h3>Result</h3>
        <div id="output">No prediction yet</div>
    </div>

</div>

<script>
const imageInput = document.getElementById("image");
const preview = document.getElementById("preview");
const output = document.getElementById("output");

imageInput.onchange = () => {
    preview.src = URL.createObjectURL(imageInput.files[0]);
    preview.classList.remove("hidden");
};

document.getElementById("form").onsubmit = async (e) => {
    e.preventDefault();

    const fd = new FormData();
    fd.append("image", imageInput.files[0]);

    output.innerText = "Predicting...";

    const res = await fetch("/predict", {
        method: "POST",
        body: fd
    });

    const data = await res.json();
    output.innerHTML = `<b>${data.prediction}`;
};
</script>

</body>
</html>
